# Fund Transfer API Test Automation  

## ðŸ“Œ Overview  
This project contains automated tests for the **Fund Transfer API**, which allows performing **account creation, deposits, withdrawals, fund transfers, and currency conversions**.  
The tests are implemented using **Python + Pytest + Requests** and ensure the application's functionality, error handling, and concurrency support.

---

## ðŸš€ Prerequisites  
Before running the tests, ensure the following dependencies are installed:  

- **Python 3.8+** (For executing the tests)
- **pip** (Python package manager)  
- **Git** (For cloning the repository)  

Check Python installation:  
```bash
python --version
pip --version
```

Ensure that the **Fund Transfer API backend is running** before running tests.  

---

## ðŸ“¦ Installation  

1ï¸âƒ£ **Clone the Repository:**  
```bash
git clone https://github.com/aminebaccar/fund-transfer-python.git
cd fund-transfer-python
```

2ï¸âƒ£ **Create a Virtual Environment (Recommended)**  
```bash
python -m venv venv
source venv/bin/activate  # On Mac/Linux
venv\Scripts\activate     # On Windows
```

3ï¸âƒ£ **Install Required Dependencies**  
```bash
pip install -r requirements.txt
```

---

## âš™ï¸ Ensuring the Fund Transfer API Backend is Running  

Before executing the tests, ensure that the **Fund Transfer API backend** is **running and accessible** at:  
ðŸ“ `http://localhost:8080/swagger-ui/index.html`  

If the API is not running, refer to the **backend repository** or your deployment setup for instructions.

---

## âœ… Running the Tests  

Run **all tests**:  
```bash
pytest -v --html=report.html
```

Run **tests for a specific module**:  
```bash
pytest tests/test_fund_transfer.py
```

Run a **single test**:  
```bash
pytest tests/test_fund_transfer.py::test_successful_transfer
```

Run tests **with parallel execution**:  
```bash
pytest -n 4
```

---

## ðŸ“‚ Project Structure  

```
fund-transfer-api-tests/
â”‚â”€â”€ tests/
â”‚   â”œâ”€â”€ test_create_account.py
â”‚   â”œâ”€â”€ test_get_account.py
â”‚   â”œâ”€â”€ test_deposit_withdraw.py
â”‚   â”œâ”€â”€ test_fund_transfer.py
â”‚   â”œâ”€â”€ test_negative_cases.py
â”‚   â”œâ”€â”€ test_exchange_rate.py
â”‚   â”œâ”€â”€ test_concurrent_transfers.py
â”‚â”€â”€ utils/
â”‚   â”œâ”€â”€ api_client.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ helpers.py
â”‚   â”œâ”€â”€ logger.py
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ pytest.ini
â”‚â”€â”€ README.md
```

### **Key Directories & Files**
- **`tests/`** â€“ Contains all test cases.
- **`utils/`** â€“ Contains helper modules like API client, logging configuration and execution handler.
- **`requirements.txt`** â€“ Lists required Python dependencies.
- **`pytest.ini`** â€“ Configures Pytest behavior.
- **`README.md`** â€“ Documentation.

---

## ðŸ“‹ Test Case Overview  

---

## **ðŸŸ¢ Core Functionality Test Cases (High Priority)**
| **TC No.** | **Test Name** | **Description** | **Test File** |
|-----------|-------------|-----------------|----------------|
| âœ… TC_01 | `test_create_account` | Create an account with a valid currency and verify it is created successfully. | `test_create_account.py` |
| âœ… TC_02 | `test_get_account` | Retrieve account details using a valid account ID and verify response. | `test_get_account.py` |
| âœ… TC_03 | `test_deposit_money` | Deposit money into an account and verify the updated balance. | `test_deposit_withdraw.py` |
| âœ… TC_04 | `test_withdraw_money` | Withdraw money from an account and verify the updated balance. | `test_deposit_withdraw.py` |
| âœ… TC_05 | `test_successful_transfer` | Transfer funds between two accounts with the same currency and verify balance updates. | `test_fund_transfer.py` |
| âœ… TC_06 | `test_successful_currency_exchange` | Transfer funds between two accounts with different currencies and validate the conversion. | `test_exchange_rate.py` |
| âœ… TC_07 | `test_transfer_rollback_on_failure` | Ensure failed transactions do not deduct money. | `test_fund_transfer.py` |
| âœ… TC_08 | `test_transfer_invalid_format` | Attempt to transfer with an invalid account format (not a 9-digit number) and verify failure. | `test_negative_cases.py` |
| âœ… TC_09 | `test_transfer_non_existent_account` | Attempt to transfer with a non-existent account and verify that the API returns a `404`. | `test_negative_cases.py` |
| âœ… TC_10 | `test_transfer_insufficient_balance` | Attempt to transfer more money than available in the debit account and verify failure. | `test_negative_cases.py` |
| âœ… TC_11 | `test_transfer_fails_when_exchange_rate_unavailable` | Attempt to transfer funds with an invalid currency to simulate an exchange rate retrieval failure. | `test_exchange_rate.py` |

---

## **ðŸŸ¡ Additional Validations & Negative Test Cases**
| **TC No.** | **Test Name** | **Description** | **Test File** |
|-----------|-------------|-----------------|----------------|
| âœ… TC_12 | `test_withdraw_more_than_balance` | Attempt to withdraw more money than available and verify that it fails. | `test_negative_cases.py` |
| âœ… TC_13 | `test_minimum_transfer_limit` | Ensure zero or negative transfers are rejected. | `test_negative_cases.py` |

---

## **ðŸ”´ Concurrency & Performance Testing**
| **TC No.** | **Test Name** | **Description** | **Test File** |
|-----------|-------------|-----------------|----------------|
| âœ… TC_14 | `test_concurrent_transfers` | Perform 100 simultaneous transactions to test concurrency. | `test_concurrent_transfers.py` |
| âœ… TC_15 | `test_concurrent_transfers_high_load` | Perform 2500 simultaneous transactions to test system load. | `test_concurrent_transfers.py` |

---

## **ðŸš€ Summary of Test Coverage**
âœ… **Core API features** like account creation, deposits, withdrawals, and transfers are well-covered.  
âœ… **Negative scenarios** like invalid formats, non-existent accounts, and insufficient balance are included.  
âœ… **Concurrency testing** ensures the API can handle multiple transactions.  

---

## ðŸ“Š Generating Test Reports  

Pytest generates HTML reports for better visualization of test results.  
Run:  
```bash
pytest --html=report.html --self-contained-html
```

View results by opening **`report.html`** in your browser.

---

### **ðŸ“ Logging Test Results**  

To track test execution details, a logging system is implemented. Logs are saved both **to a file (`test_results.log`) and displayed in the console** for real-time monitoring.  

#### **ðŸ“Œ Viewing Logs in the Console**
Logs are automatically displayed when running tests:  
```bash
pytest -v
```

#### **ðŸ“Œ Saving Logs to a File**  
All test execution details are saved in **`test_results.log`** for later analysis.  

#### **ðŸ“Œ Manually Checking the Log File**
To view the latest test logs, open:  
```bash
cat test_results.log  # Linux/Mac
type test_results.log # Windows
```

#### **ðŸ“Œ Running Tests with Logging**
Ensure logs are captured properly by running:  
```bash
pytest --log-cli-level=INFO
```

#### **ðŸ“Œ Reset Log File Before Each Run**
If needed, clear the log file before running tests:  
```bash
echo "" > test_results.log  # Linux/Mac
echo. > test_results.log    # Windows
```

This ensures each test run starts with a **fresh log file** instead of appending logs.

---

## ðŸŽ¯ Additional Notes  
- Ensure that the **API backend is running** before executing tests.  
- The test suite is **modular**, allowing easy additions of new test cases.

---
## ðŸ“¬ Contact  
For any issues or suggestions, reach out via email.
